<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:h="http://java.sun.com/jsf/html"	
                 xmlns:f="http://java.sun.com/jsf/core"
                 xmlns:ui="http://java.sun.com/jsf/facelets"
                 xmlns:p="http://primefaces.org/ui"	
                 xmlns:c="http://java.sun.com/jsp/jstl/core"	
                 xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                 >

    <h:form id="ringForm" rendered="#{not empty ringMB.pets}">       

        <p:ring id="petRing" value="#{ringMB.pets}" var="pet"> 
            <p:column>
                <p:outputPanel style="text-align:center;" layout="block">                    

                    #{pet.name}                       

                    <p:commandButton update=":ringForm:petDetail"  
                                     icon="ui-icon-search"  
                                     title="View Pet" oncomplete="petDialog.show()" action="#{ringMB.setSelectedPet(pet)}"> 

                    </p:commandButton>
                </p:outputPanel>  
            </p:column>
        </p:ring>  

        <p:dialog header="#{ringMB.selectedPet.name}" id="petDialog" 
                  widgetVar="petDialog" showEffect="fade" 
                  hideEffect="fade" 
                  modal="true" width="300" height="350">

            <p:outputPanel id="petDetail" style="text-align:center;" layout="block">
                <h:panelGrid  columns="1" cellpadding="10" rendered="#{not empty ringMB.selectedPet}">
                    <f:facet name="header">
                        <p:graphicImage
                            value="image/dynamic?id=#{ringMB.selectedPet.id}"
                            width="130" height="130"/>
                    </f:facet>

                    <h:outputLabel for="name" value="Name:" />
                    <h:outputText id="name"
                                  value="#{ringMB.selectedPet.name}" />


                    <h:outputLabel for="userName" value="User Name:" />
                    <h:outputText id="userName"
                                  value="#{ringMB.selectedPet.userName}" />
                </h:panelGrid>  
            </p:outputPanel>

        </p:dialog>

    </h:form>

</ui:composition>
